{% extends "base.html" %}

{% block content %}
<table>
    <tr>
        <th>Words</th>
        <th>POS</th>
        <th>Occurences</th>
    </tr>
    {% for word in words %}
    <tr>

        <td>
            <input type="checkbox", name="cb_word", onchange="modifySubmit(this)" id="{{word.lemme}}">
            <label for="{{word.lemme}}">{{ word.lemme }}</label>

        </td>
        <td>{{ word.pos }}</td>
        <td>{{ word.doc_freq }}</td>
    </tr>
    {% endfor %}
</table>


<p id="confirmation"></p>
<button type = 'submit' id = 'submit_select' onsumbit = 'askConfirmation()' name = 'validateSelect'></button>

<script>
  let nb_selected = 0
  let table = document.querySelector('table')
  table.onchange = function(event) {
  let target = event.target // where was the click?
  if(target.checked == true){
    nb_selected += 1
    }
   else{
    nb_selected -= 1
    log(nb_selected + 'lol')
    }
   document.querySelector("#submit_select").innerHTML = " Validate Selection? (" + nb_selected + " words)"
   }


   function askConfirmation()
{
   let selected_words = [];
   let checkboxes = document.getElementsByName("cb_word");
   for (const checkbox of checkboxes) {
      if (checkbox.checked) {
            selected_words.push(checkbox.id);
        }
    }

   const confirm_message = "Do you want to generate " + nb_selected + " flashcards?";
   document.getElementById("confirmation").innerHTML = confirm_message;
}
</script>
{% endblock %}