{% extends "base.html" %}
{% block content %}
<div>Select the vocab you want to extract</div>
<table>
   <tr>
      <th>Words</th>
      <th>Occurences</th>
      <th>Translation</th>
   </tr>
   {% for item in words %}
   <tr>
      <td>
         <input type="checkbox" , name="cb_word" , id="{{item.lemme}}">
         <label for="{{item.lemme}}">{{ item.lemme }}</label>
      </td>
      <td>
         {{ item.doc_freq }}
      </td>
      <td>
         {{ item.translation }}
      </td>
   </tr>
   {% endfor %}
</table>
<button type="submit" id="select_words_validate">Validate Selection</button>
<p id="confirmation"></p>
<script>
   document.querySelector("#select_words_validate").onsubmit = async (event) => {
      var selected_words = [];
      var checkboxes = document.getElementsByName("cb_word");
      for (const checkbox of checkboxes) {
         if (checkbox.checked) {
            selected_words.push(checkbox.id);
         }
      }
      var fc_nb = selected_words.length;
      const confirm_message = "Do you want to generate " + fc_nb + " flashcards?";
      document.getElementById("confirmation").innerHTML = confirm_message;
   }
</script>
<div>
   <p id="output"></p>
</div>
<input type="submit" , name="Generate" , id="generate_flaschards"><br>
{% endblock %}